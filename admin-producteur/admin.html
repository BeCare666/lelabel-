<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="admin.css">
    <title>Administration</title>
    <link href="assets/img/favicon.svg" rel="icon">
</head>

<body id="idbody">
    <!-- Dashboard -->
    <div class="d-flex flex-column flex-lg-row h-lg-full bg-surface-secondary" id="dashbody">
        <!-- Vertical Navbar -->
        <nav class="navbar show navbar-vertical h-lg-screen navbar-expand-lg px-0 py-3 navbar-light bg-white border-bottom border-bottom-lg-0 border-end-lg"
            id="navbarVertical">
            <div class="container-fluid">
                <!-- Toggler sidebarCollapse-->
                <button class="navbar-toggler ms-n2" type="button" data-bs-toggle="collapse"
                    data-bs-target="#sidebarCollapse" aria-controls="sidebarCollapse" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <!-- Brand -->
                <a class="" href="#">
                    <img src="./../admin-producteur/../assets/img/lelabel.jpeg" alt="...">
                </a>
                <!-- User menu (mobile) -->
                <div class="navbar-user d-lg-none">
                    <!-- Dropdown -->
                    <div class="dropdown">
                        <!-- Toggle 
                        <a href="#" id="sidebarAvatar" role="button" data-bs-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false">
                            <div class="avatar-parent-child">
                                <img alt="Image Placeholder"
                                    src="https://images.unsplash.com/photo-1548142813-c348350df52b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=3&w=256&h=256&q=80"
                                    class="avatar avatar- rounded-circle">
                                <span class="avatar-child avatar-badge bg-success"></span>
                            </div>
                        </a>-->
                        <!-- Menu -->
                        <div class="dropdown-menu dropdown-menu-end" aria-labelledby="sidebarAvatar">
                            <a href="#" class="dropdown-item">Profile</a>
                            <a href="#" class="dropdown-item">Settings</a>
                            <a href="#" class="dropdown-item">Billing</a>
                            <hr class="dropdown-divider">
                            <a href="#" class="dropdown-item">Se déconnecter</a>
                        </div>
                    </div>
                </div>
                <!-- Collapse -->
                <!--insert dans le div suivant la classe "collapse" à côtéde la classe "navbar-collapse" -->
                <div class=" navbar-collapse" id="sidebarCollapse">
                    <!-- Navigation -->
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class="bi bi-house"></i> Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="showMessage">
                                <i class="bi bi-chat"></i> Messages
                                <span
                                    class="badge bg-soft-primary text-primary rounded-pill d-inline-flex align-items-center ms-auto">
                                    <p id="idtheNumberMessage"></p>
                                </span>
                            </a>
                        </li>
                    </ul>
                    <!-- Divider -->
                    <hr class="navbar-divider my-5 opacity-20">
                    <!-- Navigation -->
                    <ul class="navbar-nav mb-md-4"
                        style="overflow-y: auto;height: 300px; border: 1px rgb(81, 95, 226) solid; border-radius: 2px 22px 2px 22px;">
                        <li>
                            <div class="nav-link text-xs font-semibold text-uppercase text-muted ls-wide" href="#"
                                style="display: none;">
                                Contacts
                                <span
                                    class="badge bg-soft-primary text-primary rounded-pill d-inline-flex align-items-center ms-4">13</span>
                            </div>
                        </li>
                        <p id="getAllmessageforsite"></p>
                    </ul>
                    <!-- Push content down -->
                    <div class="mt-auto"></div>
                    <!-- User (md) -->
                    <!-- import * as alias from 'module';-->
                    <!-- import * as alias from 'module';-->
                    <!-- import * as alias from 'module';-->
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" href="./../admin-producteur/../index.html">
                                <i class="bi bi-person-square"></i>Visiter le site
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="loginadmin.html">
                                <i class="bi bi-box-arrow-left"></i> Logout
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Main content -->
        <div class="h-screen flex-grow-1" id="hooooooo">
            <style>
                #hooooooo {
                    overflow-y: hidden !important;
                }
            </style>
            <!-- Header -->
            <header class="bg-surface-primary border-bottom pt-6">
                <div class="container-fluid">
                    <div class="mb-npx">
                        <div class="row align-items-center">
                            <div class="col-sm-6 col-12 mb-4 mb-sm-0">
                                <!-- Title -->
                                <h1 class="h2 mb-0 ls-tight">Administration</h1>
                                <div class="col-xl-12 col-sm-12 col-12">
                                    <div class="card shadow border-0">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col">
                                                    <span class="h6 font-semibold text-muted text-sm d-block mb-2">
                                                        </span>
                                                    <span class="h3 font-bold mb-0" id="allpayementidy"></span>
                                                </div>
                                                <div class="col-auto">
                                                    <div
                                                        class="icon icon-shape bg-tertiary text-white text-lg rounded-circle">
                                                        <i class="bi bi-credit-card"></i>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mt-2 mb-0 text-sm" style="display: none;">
                                                <span class="badge badge-pill bg-soft-success text-success me-2">
                                                    <i class="bi bi-arrow-up me-1"></i>13%
                                                </span>
                                                <span class="text-nowrap text-xs text-muted">Since last month</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Actions -->
                            <div class="col-sm-6 col-12 text-sm-end">
                                <div class="mx-n1">
                                    <a href="#" class="btn d-inline-flex btn-sm  btn-primary mx-1">
                                        <span class=" pe-2">
                                            <i class="bi bi-plus"></i>
                                        </span>
                                        <span data-whatever="@mdo" id="AceptPlanning">Poster les interviews</span>
                                    </a>
                                    <!---<a href="#" class="btn d-inline-flex btn-sm btn-primary  border-base mx-1">
                                        <span class=" pe-2">
                                            <i class="bi bi-pencil"></i>
                                        </span>
                                        <p id="creerButton"><span data-whatever="@mdo" id="AceptPlanningblogs">Poster
                                                les produits</span>
                                            <span data-whatever="@mdo" id="AceptPlanningblogsy"
                                                style="display: none;">Poster les produits@</span>
                                        </p>
                                    </a>--->
                                </div>
                            </div>
                        </div>
                        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLabel">Interview à poster</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <form>
                                            <div class="form-group">
                                                <label for="recipient-name" class="col-form-label">Nom du
                                                    produit:</label>
                                                <input type="text" class="form-control" id="recipient-name1">
                                                <label for="recipient-name" class="col-form-label">Code de la
                                                    vidéo:</label>
                                                <input type="text" class="form-control" id="recipient-name2">
                                                <!-- Actions  <label for="recipient-name" class="col-form-label">Prix Promo:</label>
                                                <input type="tel" class="form-control" id="recipient-name3">
                                                <label for="recipient-name" class="col-form-label">Prix:</label>
                                                <input type="tel" class="form-control" id="recipient-name4"> -->
                                                <label for="recipient-name" class="col-form-label">Catégorie:</label>
                                                <select id="exampleFormControlSelect1" class="form-control"
                                                    style="height: 50px;">
                                                    <option selected>....</option>
                                                    <option value="Beauté, cosmétique & soins">Beauté, cosmétique &
                                                        soins</option>
                                                    <option value="Agriculture">Agriculture</option>
                                                    <option value="Agro-alimentaire">Agro-alimentaire</option>
                                                    <option value="Informatique">Informatique</option>
                                                    <option value="Autres">Autres</option>
                                                </select>

                                            </div>
                                            <div class="form-group">
                                                <label for="message-text" class="col-form-label">Description:</label>
                                                <textarea class="form-control" id="message-text"
                                                    style="height: 150px;"></textarea>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" id="Selbtn1"
                                            data-dismiss="modal">Fermer</button>
                                        <button type="button" data-dismiss="modal" class="btn btn-primary"
                                            id="Insbtn">Poster le
                                            l'interview</button>
                                        <button type="button" data-dismiss="modal" class="btn btn-primary" id="Updbtn"
                                            style="display: none;">Metrre à jour</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--Modal blogs-->
                        <div class="modal fade" id="exampleModalblogs" tabindex="-1" role="dialog"
                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLabel">Poster votre blogs</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <form>
                                            <div class="form-group">
                                                <label for="recipient-name" class="col-form-label">Titre du
                                                    blog:</label>
                                                <input type="text" class="form-control" id="recipient-name1b">
                                                <label for="recipient-name" class="col-form-label">Photo:</label>
                                                <input type="file" class="form-control" id="recipient-name2b">
                                                <label for="recipient-name" class="col-form-label">Catégorie:</label>
                                                <select id="exampleFormControlSelect1blogs" class="form-control"
                                                    style="height: 50px;">
                                                    <option selected>....</option>
                                                    <option value="Beauté, cosmétique & soins">Beauté, cosmétique &
                                                        soins</option>
                                                    <option value="Agriculture">Agriculture</option>
                                                    <option value="Agro-alimentaire">Agro-alimentaire</option>
                                                    <option value="Informatique">Informatique</option>
                                                    <option value="Autres">Autres</option>
                                                </select>
                                            </div>



                                            <button class="btn btn-primary"
                                                onclick="CopyMe(' <blockquote><p> </p></blockquote>')">Titre </button>
                                            &nbsp;&nbsp;
                                            <button class="btn btn-primary" onclick="CopyMeA('<h2></h2>')">Titre
                                                h2</button>&nbsp;&nbsp;
                                            <button class="btn btn-primary" onclick="CopyMe1('<h3></h3>')">Titre
                                                h3</button>
                                            <button class="btn btn-primary" onclick="CopyMe2('<br>')">br</button>
                                            <button class="btn btn-primary" onclick="CopyMe3('<p></p>')">P</button>
                                            <div class="form-group">
                                                <label for="message-text" class="col-form-label">Description:</label>
                                                <textarea class="form-control" id="message-textb"
                                                    style="height: 150px;"></textarea>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" id="Selbtn1blogs"
                                            data-dismiss="modal">Fermer</button>
                                        <button type="button" data-dismiss="modal" class="btn btn-primary"
                                            id="Insbtnblogs">Poster le
                                            blog</button>
                                        <button type="button" data-dismiss="modal" class="btn btn-primary"
                                            id="Updbtnblogs" style="display: none;">Poster le blog</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Nav -->
                        <ul class="nav nav-tabs mt-4 overflow-x border-0">
                            <li class="nav-item ">
                                <a href="#" class="nav-link active" onclick="Touslesinterviews()">Tous les
                                    interviews</a>
                            </li>
                           <!--  <li class="nav-item ">
                                <a href="#" class="nav-link active" onclick="Touslesblogs()">Tous les blogs</a>
                            </li>
                             <li class="nav-item">
                            <a href="#" class="nav-link font-regular">Shared</a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link font-regular">File requests</a>
                        </li>-->
                        </ul>
                    </div>
                </div>
            </header>
            <!-- Main -->
            <main class="py-6 bg-surface-secondary">
                <div class="container-fluid">

                    <div class="card shadow border-0 mb-7" style="
                    padding:4px;
                    
                    height: 510px;
                    overflow-x: hidden;
                    overflow-y: auto;
                    text-align:justify;">
                        <div class="card-header">
                            <h5 class="mb-0">Tout nos Produits</h5>
                        </div>
                        <div class="table-responsive" style="margin-bottom: 30px;" id="takemyAllInter">
                            <table class="table table-hover table-nowrap">
                                <thead class="thead-light">
                                    <tr>
                                        <th scope="col">Nom</th>
                                        <th scope="col">Date</th>
                                        <th scope="col">Catégorie</th>
                                        <th scope="col">Description</th>
                                        <th scope="col">Id</th>

                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody id="createAllproduct">
                                </tbody>
                            </table>
                            <div id="createAllproductnodata"></div>
                        </div>

                        <div class="table-responsive" style="margin-bottom: 30px; display: none;" id="takeAllBlogs">
                            <table class="table table-hover table-nowrap">
                                <thead class="thead-light">
                                    <tr>
                                        <th scope="col">Titre</th>
                                        <th scope="col">Date</th>
                                        <th scope="col">Catégorie</th>
                                        <th scope="col">Description</th>
                                        <th scope="col">Id</th>

                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody id="createAllproductblogs" style="background-color: aqua;">
                                </tbody>
                            </table>
                            <div id="createAllproductnodatablogs"></div>
                        </div>
                        <div class="card-footer border-0 mb-7">
                            <span class="text-muted text-sm">Votre répertoire des interviews</span>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    <script>
        function Touslesinterviews() {
            document.getElementById('takemyAllInter').style.display = "block";
            document.getElementById('takeAllBlogs').style.display = "none";
        }
        function Touslesblogs() {
            document.getElementById('takeAllBlogs').style.display = "block";
            document.getElementById('takemyAllInter').style.display = "none";
        }
    </script>
    <div class="modal fade" id="exampleModalCenterAll" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalCenterTitle">Modification de Produit</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p style="text-align: center;"> Voulez-vous vraiment mettre à jour votre produit ?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" id="idseleectdata">Mettre à
                        jour</button>
                    <button type="button" class="btn btn-danger" id="Delbtn"><i class="bi bi-trash"></i>&nbsp;
                        Supprimer</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="exampleModalCenterAllblogs" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalCenterTitle">Modification de Blog</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p style="text-align: center;"> Voulez-vous vraiment mettre à jour votre blog ?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" id="idseleectdatablogs">Mettre
                        à
                        jour</button>
                    <button type="button" class="btn btn-danger" id="Delbtnblogs"><i class="bi bi-trash"></i>&nbsp;
                        Supprimer</button>
                </div>
            </div>
        </div>
        <img src="../admin-producteur/./assets/img/" alt="">
    </div>
    <div class="modal fade" id="exampleModalCenterAllMessage" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="container">
                        <div class="row">
                            <div class="col-12">
                                <span id="idObjetMessage"></span>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <span id="idEmailMessage"></span>
                                </div>
                            </div>
                        </div>
                    </div>


                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p id="idMysmsSend"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" data-dismiss="modal" class="btn btn-danger" id="DelbtnMymesms"><i
                            class="bi bi-trash"></i>&nbsp;
                        Supprimer</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        function CopyMe(TextToCopy) {
            var TempText = document.createElement("input");
            TempText.value = TextToCopy;
            document.body.appendChild(TempText);
            TempText.select();

            document.execCommand("copy");
            document.body.removeChild(TempText);

            alert(TempText.value);
        }
        function CopyMe1(TextToCopy) {
            var TempText = document.createElement("input");
            TempText.value = TextToCopy;
            document.body.appendChild(TempText);
            TempText.select();

            document.execCommand("copy");
            document.body.removeChild(TempText);

            alert(TempText.value);
        }
        function CopyMe2(TextToCopy) {
            var TempText = document.createElement("input");
            TempText.value = TextToCopy;
            document.body.appendChild(TempText);
            TempText.select();

            document.execCommand("copy");
            document.body.removeChild(TempText);

            alert(TempText.value);
        }

        function CopyMe3(TextToCopy) {
            var TempText = document.createElement("input");
            TempText.value = TextToCopy;
            document.body.appendChild(TempText);
            TempText.select();

            document.execCommand("copy");
            document.body.removeChild(TempText);

            alert(TempText.value);
        }

        function CopyMeA(TextToCopy) {
            var TempText = document.createElement("input");
            TempText.value = TextToCopy;
            document.body.appendChild(TempText);
            TempText.select();

            document.execCommand("copy");
            document.body.removeChild(TempText);

            alert(TempText.value);
        }
    </script>
    <script type="module">

        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCPT0dFa2QyzebMf2hbLu3CTa28HrfK2Uw",
            authDomain: "panafricain-e8055.firebaseapp.com",
            databaseURL: "https://panafricain-e8055-default-rtdb.firebaseio.com",
            projectId: "panafricain-e8055",
            storageBucket: "panafricain-e8055.appspot.com",
            messagingSenderId: "1048049832867",
            appId: "1:1048049832867:web:874e5481ae3b1679808016"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);


        import {
            getDatabase,
            ref,
            set,
            update,
            child,
            onValue,
            remove,
            get,
        } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";

        import { getStorage, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-storage.js"

        const db = getDatabase();

        //--------------referances-----------------//                 
        var namebox = document.getElementById("recipient-name1");
        var rollbox = document.getElementById("recipient-name2");
        var secbox = document.getElementById("recipient-name3");
        var genbox = document.getElementById("recipient-name4");
        var genboxprix = document.getElementById("exampleFormControlSelect1");
        var ExampleFormControlSelect1blogs = document.getElementById("exampleFormControlSelect1blogs");
        var genboxtextarea = document.getElementById("message-text");
        var IdtheNumberMessage = document.getElementById("idtheNumberMessage");


        var IdEmailMessage = document.getElementById("idEmailMessage");
        var IdObjetMessage = document.getElementById("idObjetMessage");
        var IdMysmsSend = document.getElementById("idMysmsSend");


        var insbtn = document.getElementById("Insbtn");
        var selbtn = document.getElementById("Selbtn");
        var Idseleectdata = document.getElementById("idseleectdata");
        var Edseleectdatablogs = document.getElementById("idseleectdatablogs");
        var updbtn = document.getElementById("Updbtn");
        var updbtnblogs = document.getElementById("Updbtnblogs");
        //var updbtnblogsy = document.getElementById("AceptPlanningblogsy");
        var delbtn = document.getElementById("Delbtn");
        var delbtnblogs = document.getElementById("Delbtnblogs");

        var recipienb = document.getElementById("recipient-name1b");
        var recipientname2b = document.getElementById("recipient-name2b");
        var textby = document.getElementById("message-textb");
        var insbtnblogs = document.getElementById("Insbtnblogs");

        //function to get now date

        var d = new Date();
        var date = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate();
        var hours = d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds();
        var fullDate = date + ' ' + hours;

        var tableTakeIdproduct = []
        var tableTakeIdproductblogs = []

        //--------------function to set image--------// //--------------function to set image--------//
        //--------------function to set image--------// //--------------function to set image--------//

        // var urlImage = []
        // function uploadImage() {
        //    firebase.initializeApp(firebaseConfig);
        //    const ref = firebase.storage().ref();
        //    const file = document.querySelector("#recipient-name2").files[0];
        //    const name = +new Date() + "-" + file.name;
        //   const metadata = {
        //       contentType: file.type
        //   };
        //   const task = ref.child(name).put(file, metadata); task
        //       .then(snapshot => snapshot.ref.getDownloadURL())
        //      .then(url => {
        //          console.log(url);
        //           urlImage.push(url)
        //          setTimeout(() => {
        //              insertData()
        //          }, 5000)
        //      })
        //       .catch(console.error);
        // }
        // const errorMsgElement = document.querySelector('span#errorMsg');

        //---------function to insert the product in the site--------// //---------function to insert the product in the site--------//
        //---------function to insert the product in the site--------// //---------function to insert the product in the site--------//


        //--------------function to generate unique ID--------// //--------------function to generate unique ID--------//
        //--------------function to generate unique ID--------// //--------------function to generate unique ID--------//
        var id = () => {
            return Math.floor((1 + Math.random()) * 0x10000)
                .toString(16)
                .substring(1);
        }
        const idproduct = id();

        function insertData() {
            const idproduct = id()
            set(ref(db, "Thedatas/" + idproduct), {
                Idproduct: idproduct,
                NameOfstd: namebox.value,
                RollNo: rollbox.value,
                //PrixPromo: secbox.value,
                //Prix: genbox.value,
                Category: genboxprix.value,
                Genboxtextarea: genboxtextarea.value,
                Datetime: fullDate
            })
                .then(() => {
                    alert("les données sont bien envoyés");
                    window.location.reload();
                })
                .catch((error) => {
                    alert("les données ne sont pas envoyés " + error);
                });
        }

        //---------function to open exampleModal modal--------////---------function to open exampleModal modal--------//
        //---------function to open exampleModal modal--------////---------function to open exampleModal modal--------//


        document.getElementById("AceptPlanning").addEventListener("click", function () {
            //  console.log("ok tour le ppofkkfv");
            $("#exampleModal").modal({
                show: true,
                backdrop: "static",
                keyboard: false,
            });
        });

        //---------function to open exampleModal modal blogs--------////---------function to open exampleModal modal blogs--------//
        //---------function to open exampleModal modal blogs--------////---------function to open exampleModal modal blogs--------//


        //document.getElementById("AceptPlanningblogs").addEventListener("click", function () {
            //  console.log("ok tour le ppofkkfv");
          //   $("#exampleModalblogs").modal({
          //       show: true,
          //       backdrop: "static",
          //       keyboard: false,
          //   });
         //});

        var urlImageblogs = []
        function uploadImageblogs() {
            firebase.initializeApp(firebaseConfig);
            const ref = firebase.storage().ref();
            const file = document.querySelector("#recipient-name2b").files[0];
            const name = +new Date() + "-" + file.name;
            const metadata = {
                contentType: file.type
            };
            const task = ref.child(name).put(file, metadata); task
                .then(snapshot => snapshot.ref.getDownloadURL())
                .then(url => {
                    console.log(url);
                    urlImageblogs.push(url)
                    setTimeout(() => {
                        insertDatablogs()
                    }, 5000)
                })
                .catch(console.error);
        }
        var idblogs = () => {
            return Math.floor((1 + Math.random()) * 0x10000)
                .toString(16)
                .substring(1);
        }
        const idproductblogs = idblogs();

        function insertDatablogs() {
            var idblogsy = () => {
                return Math.floor((1 + Math.random()) * 0x10000)
                    .toString(16)
                    .substring(1);
            }
            const idproductblogss = idblogsy();

            const idproductblogr = idblogs();
            set(ref(db, "Blogs/" + idproductblogr), {
                Idproduct: idproductblogss,
                Category: ExampleFormControlSelect1blogs.value,
                Titleblog: recipienb.value,
                RollNo: urlImageblogs[0],
                Descriptionblogs: textby.value,
                Datetime: fullDate
            })
                .then(() => {
                    localStorage.setItem("maVariablee", idproductblogr);
                    alert("les données sont bien envoyés");
                    window.location.reload();
                })
                .catch((error) => {
                    alert("les données ne sont pas envoyés " + error);
                });
        }

  
      
        //---------end function to open exampleModal modal blogs--------////---------function to open exampleModal modal blogs--------//
        //---------end function to open exampleModal modal blogs--------////---------function to open exampleModal modal blogs--------//

        //--------------update data-----------------//

        function updatedata() {
            const last = tableTakeIdproduct.slice(-1).pop();
            update(ref(db, "Thedatas/" + last), {
                NameOfstd: namebox.value,
                Category: genboxprix.value,
                Genboxtextarea: genboxtextarea.value,
                Datetime: fullDate
            })
                .then(() => {
                    window.location.reload();
                })
                .catch((error) => {
                    alert("les données ne sont pas mise à jour " + error);
                });
        }

        var urlImageblogsZ = []
        function uploadImageblogsz() {
            firebase.initializeApp(firebaseConfig);
            const ref = firebase.storage().ref();
            const file = document.querySelector("#recipient-name2b").files[0];
            const name = +new Date() + "-" + file.name;
            const metadata = {
                contentType: file.type
            };
            const task = ref.child(name).put(file, metadata); task
                .then(snapshot => snapshot.ref.getDownloadURL())
                .then(url => {
                    console.log(url);
                    urlImageblogsZ.push(url)
                    setTimeout(() => {
                        insertDatablogstwo()
                    }, 5000)
                })
                .catch(console.error);
        }

//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

        function updatedatablogs() {
            var d = new Date();
            var date = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate();
            var hours = d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds();
            var fullDatey = date + ' ' + hours;

            const valeurVariableby = localStorage.getItem("maVariablee");

            update(ref(db, "Blogs/" + valeurVariableby), {
                Titleblog: recipienb.value,
                Descriptionblogs: textby.value,
                Datetime: fullDatey
            })
                .then(() => {
                    uploadImageblogsz()
                    window.location.reload();
                })
                .catch((error) => {
                    alert("les données ne sont pas mise à jour " + error);
                });

                const idproductblogs = idblogs();
            set(ref(db, "Blogstwo/" + idproductblogs), {
                Idproduct: idproductblogs,
                Category: ExampleFormControlSelect1blogs.value,
                Titleblog: recipienb.value,
                //RollNo: urlImageblogs[0],
                Descriptionblogs: textby.value,
                Datetime: fullDate
            })
                .then(() => {
                    alert("les données sont bien envoyés");
                    window.location.reload();
                })
                .catch((error) => {
                    alert("les données ne sont pas envoyés " + error);
                });
                
        }

//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!


        //--------------delete data-----------------//
        function deletedata() {
            const last = tableTakeIdproduct.slice(-1).pop();
            remove(ref(db, "Thedatas/" + last))
                .then(() => {
                    window.location.reload();
                })
                .catch((error) => {
                    alert("les données ne sont pas supprimées " + error);
                });
        }


        //--------------delete data blogs-----------------//
        function deletedatablogs() {
            const last = tableTakeIdproductblogs.slice(-1).pop();
            remove(ref(db, "Blogs/" + last))
                .then(() => {
                    window.location.reload();
                })
                .catch((error) => {
                    alert("les données ne sont pas supprimées " + error);
                });
        }

        //--------------Select data-----------------//

        function seleectData() {
            $("#exampleModal").modal({
                show: true,
                backdrop: "static",
                keyboard: false,
            });
            const last = tableTakeIdproduct.slice(-1).pop();
            document.getElementById('Updbtn').style.display = 'block'
            document.getElementById('Insbtn').style.display = 'none'
            const dbref = ref(db);
            get(child(dbref, "Thedatas/" + last))
                .then((snapshot) => {
                    if (snapshot.exists()) {
                        namebox.value = snapshot.val().NameOfstd;
                        genboxprix.value = snapshot.val().Category;
                        rollbox.value = snapshot.val().RollNo;
                        genboxtextarea.value = snapshot.val().Genboxtextarea;
                    } else {
                        alert("no data");
                    }
                })
                .catch((error) => {
                    alert("il y a une ERROR " + error);
                });
        }

        //------------get all data ------------//
        function getAllDataOnce() {
            const dbref = ref(db);
            get(child(dbref, "Thedatas")).then((snopshot) => {
                var myalldatas = [];
                snopshot.forEach((childsnopshot) => {
                    myalldatas.push(childsnopshot.val());
                });

            });
        }

        // function to get all messages in Real Time 
        function getAllDataRealtime() {
            var div = document.getElementById('createAllproduct');
            var myalldatas = [];
            const UserConnectIdToBuy = localStorage.getItem("storageName");
            if (!UserConnectIdToBuy) {
                window.location.href = "loginadmin.html"
            }
            const dbref = ref(db, "Thedatas");
            onValue(dbref, (snopshot) => {
                snopshot.forEach((childsnopshot) => {
                    myalldatas.push(childsnopshot.val());
                });
                if (myalldatas.length != 0) {
                    return myalldatas.forEach((k) => {
                        let trow = document.createElement("tr");

                        trow.addEventListener('click', function () {
                            trow.id = `${k.Idproduct}`
                            tableTakeIdproduct.push(trow.id)
                            $("#exampleModalCenterAll").modal({
                                show: true,
                                backdrop: "static",
                                keyboard: false,
                            });
                        })
                        trow.style.cursor = "pointer"
                        trow.innerHTML =
                            `
                    <td>
                        <img alt="..."
                            src="https://images.unsplash.com/photo-1502823403499-6ccfcf4fb453?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=3&w=256&h=256&q=80"
                            class="avatar avatar-sm rounded-circle me-" style="display: none;">
                        <a class="text-heading font-semibold" href="#">
                            <div style="width: 20vh !important; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;">${k.NameOfstd}</div> 
                        </a>
                    </td>
                    <td>
                        ${k.Datetime}
                    </td>
                    <td>
                        <img alt="..."
                            src="https://preview.webpixels.io/web/img/other/logos/logo-1.png"
                            class="avatar avatar-xs rounded-circle me-2">
                        <a class="text-heading font-semibold" href="#">
                            ${k.Category}
                        </a>
                    </td>
                    <td>
                        <div style="width: 20vh !important; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;">${k.Genboxtextarea}</div> 
                    </td>
                    <td class="text-end">
                        <a class=" neutralMyclass">${k.Idproduct} </a>
                    </td>
                    <td class="text-end" style="display:none;">
                        <a class="btn btn-sm btn-neutral neutralMyclass">Mise à jour</a>
                        <button type="button"
                            class="btn btn-sm btn-square btn-neutral text-danger-hover">
                            <i class="bi bi-trash"></i>
                        </button>
                    </td>                                  
                                
            `
                        div.append(trow)

                    })
                } else {
                    var CreateAllproductnodata = document.getElementById('createAllproductnodata')
                    CreateAllproductnodata.innerHTML = ` 
                                    <div style = "display: flex; justify-content: center; margin: auto;">
                                    <img src="assets/img/no_data.svg" alt="" style = "width: 100%; height: 20vh;">
                                    </div> 
                                    <p style="text-align: center;">Vous n'avez pas encore d'interviews.</p>
                                    `
                }
            });
           
        }



        var tableTakeIdproductM = []

        //------------function to get all message function in Once time------------//

        function getAllDataOnceMessages() {
            const dbref = ref(db);
            get(child(dbref, "Messages")).then((snopshot) => {
                var myalldatasM = [];
                snopshot.forEach((childsnopshot) => {
                    myalldatasM.push(childsnopshot.val());
                    console.log(childsnopshot.val())
                });

            });
        }
        // function to get all message function in Real time

        function getAllDataRealtimeMessages() {
            var divMessage = document.getElementById('getAllmessageforsite');
            var myalldatasM = [];
            const dbref = ref(db, "Messages");
            onValue(dbref, (snopshot) => {

                snopshot.forEach((childsnopshot) => {
                    myalldatasM.push(childsnopshot.val());
                    //console.log(childsnopshot.val())
                    IdtheNumberMessage.innerHTML = `<p>${myalldatasM.length} </p>`

                });
                if (myalldatasM[0]) {
                    return myalldatasM.forEach((q) => {
                        let trow = document.createElement("li");
                        trow.addEventListener('click', function () {
                            trow.id = `${q.Idproduct}`
                            tableTakeIdproductM.push(trow.id)
                            const last1 = tableTakeIdproductM.slice(-1).pop();
                            const dbref = ref(db);
                            get(child(dbref, "Messages/" + last1))
                                .then((snapshot) => {
                                    if (snapshot.exists()) {
                                        IdObjetMessage.innerHTML = ` <h5 class="modal-title" id="exampleModalCenterTitle">Objet : ${snapshot.val().Objet}</h5>`
                                        IdEmailMessage.innerHTML = `<h5 class="modal-title" id="exampleModalCenterTitle">Email : ${snapshot.val().Email}</h5>`
                                        IdMysmsSend.innerHTML = ` <p style="text-align: center;"> ${snapshot.val().Message}</p>`
                                    } else {
                                        alert("no data");
                                    }
                                })
                                .catch((error) => {
                                    alert("il y a une ERROR " + error);
                                });

                        })
                        document.getElementById('DelbtnMymesms').addEventListener('click', function () {
                            const last1 = tableTakeIdproductM.slice(-1).pop();
                            remove(ref(db, "Messages/" + last1))
                                .then(() => {
                                    window.location.reload();
                                })
                                .catch((error) => {
                                    alert("les données ne sont pas supprimées " + error);
                                });
                        })

                        trow.innerHTML =
                            `
                            <li data-toggle="modal" data-target="#exampleModalCenterAllMessage">
                            <a href="#" class="nav-link d-flex align-items-center">

                                <div>
                                    <span class="d-block text-sm font-semibold">
                                    ${q.Nom}
                                    </span>
                                    <span class="d-block text-xs text-muted font-regular">
                                    ${q.Datetime}
                                    </span>
                                </div>
                                <div class="ms-auto">
                                    <i class="bi bi-chat"></i>
                                </div>
                            </a>
                            </li>
                            `
                        divMessage.append(trow)

                    })
                } else {
                    getAllmessageforsite.innerHTML = ` <div style = "display: flex; justify-content: center;"><img src="assets/img/images.png" alt=""></div> <p style="text-align: center;">Vous n'avez aucun message</p>`
                    IdtheNumberMessage.innerHTML = `<p>0</p>`
                }
            });

        }

        //--------------function to connect admin-----------------//


        //--------------asign btn-----------------//
        insbtn.addEventListener("click", insertData,);
        Idseleectdata.addEventListener("click", seleectData);
        //updbtnblogsy.addEventListener("click", seleectDatablogs);
        //Edseleectdatablogs.addEventListener("click", seleectDatablogs);
        updbtn.addEventListener("click", updatedata);
        updbtnblogs.addEventListener("click", updatedatablogs);
        //updbtnblogsy.addEventListener("click", updatedatablogs); 
        delbtn.addEventListener("click", deletedata);
        delbtnblogs.addEventListener("click", deletedatablogs);

        insbtnblogs.addEventListener("click", uploadImageblogs,);

        // function to get all blogs  // function to get all blogs
        // function to get all blogs  // function to get all blogs

        function getAllDataRealtimeblogs() {
            var div = document.getElementById('createAllproductblogs');
            var myalldatasblogs = [];
            const dbref = ref(db, "Blogs");
            onValue(dbref, (snopshot) => {
                snopshot.forEach((childsnopshot) => {
                    myalldatasblogs.push(childsnopshot.val());
                });
                if (myalldatasblogs.length != 0) {
                    return myalldatasblogs.forEach((k) => {
                        let trow = document.createElement("tr");

                        trow.addEventListener('click', function () {
                            trow.id = `${k.Idproduct}`
                            tableTakeIdproductblogs.push(trow.id)
                            $("#exampleModalCenterAllblogs").modal({
                                show: true,
                                backdrop: "static",
                                keyboard: false,
                            });
                        })
                        trow.style.cursor = "pointer"
                        trow.innerHTML =
                            `
                    <td >
                        <img alt="..."
                            src="https://images.unsplash.com/photo-1502823403499-6ccfcf4fb453?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=3&w=256&h=256&q=80"
                            class="avatar avatar-sm rounded-circle me-" style="display: none;">
                        <a class="text-heading font-semibold" href="#">
                            <div style="width: 20vh !important; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;">${k.Titleblog}</div> 
                        </a>
                    </td>
                    <td>
                        ${k.Datetime}
                    </td>
                    <td>
                        <img alt="..."
                            src="https://preview.webpixels.io/web/img/other/logos/logo-1.png"
                            class="avatar avatar-xs rounded-circle me-2">
                        <a class="text-heading font-semibold" href="#">
                            ${k.Category}
                        </a>
                    </td>
                    <td>
                        <div style="width: 20vh !important; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;">${k.Descriptionblogs}</div> 
                    </td>
                    <td class="text-end">
                        <a class=" neutralMyclass">${k.Idproduct} </a>
                    </td>
                    <td class="text-end" style="display:none;">
                        <a class="btn btn-sm btn-neutral neutralMyclass">Mise à jour</a>
                        <button type="button"
                            class="btn btn-sm btn-square btn-neutral text-danger-hover">
                            <i class="bi bi-trash"></i>
                        </button>
                    </td>                                  
                                
            `
                        div.append(trow)

                    })
                } else {
                    var CreateAllproductnodata = document.getElementById('createAllproductnodatablogs')
                    CreateAllproductnodata.innerHTML = ` 
                                    <div style = "display: flex; justify-content: center; margin: auto;">
                                    <img src="assets/img/no_data.svg" alt="" style = "width: 100%; height: 20vh;">
                                    </div> 
                                    <p style="text-align: center;">Vous n'avez pas encore de blog.</p>
                                    `
                }
            });
            setTimeout(() => {
                getAllDataRealtimeMessages()
            }, 2000)
        }

        const valeurVariableby = localStorage.getItem("maVariablee");

      //   if (valeurVariableby) {
       //      document.getElementById('AceptPlanningblogs').style.display = "none"
       //      document.getElementById('AceptPlanningblogsy').style.display = "block"
       //  }

        //--------------Select data-----------------//
        function seleectDatablogs() {
            $("#exampleModalblogs").modal({
                show: true,
                backdrop: "static",
                keyboard: false,
            });
            //const lastid = tableTakeIdproductblogs.slice(-1).pop();
            document.getElementById('Insbtnblogs').style.display = 'none'
            document.getElementById('Updbtnblogs').style.display = 'block'
            const dbref = ref(db);
            const valeurVariableby = localStorage.getItem("maVariablee");
            get(child(dbref, "Blogs/" + valeurVariableby))
                .then((snapshot) => {
                    if (snapshot.exists()) {
                        recipienb.value = snapshot.val().Titleblog;
                        textby.value = snapshot.val().Descriptionblogs;
                        ExampleFormControlSelect1blogs.value = snapshot.val().Category;
                    } else {
                        //alert("no data");
                    }
                })
                .catch((error) => {
                    alert("il y a une ERROR " + error);
                });
        }

        //function to get all montant payer
        function getAllDataRealtimePromontant() {
            var myalldatas = [];
            var myalldatasallMontant = [];
            const dbref = ref(db, "Montant/");
            onValue(dbref, (snopshot) => {
                snopshot.forEach((childsnopshot) => {
                    myalldatas.push(childsnopshot.val());
                });
                if (myalldatas.length != 0) {
                    return myalldatas.forEach((k) => {
                        const allMontant = k.NomDePrix
                        myalldatasallMontant.push(allMontant)
                        console.log(myalldatasallMontant)

                        let sum = 0;

                        for (let i = 0; i < myalldatasallMontant.length; i++) {
                            sum += +myalldatasallMontant[i];
                        }
                        if (myalldatasallMontant.length != 0) {
                            var Allpayementidy = document.getElementById('allpayementidy')
                            Allpayementidy.innerHTML = `<p>${sum} &nbsp; FCFA</p>`
                            console.log(sum)
                        } else {
                            var Allpayementidy = document.getElementById('allpayementidy')
                            Allpayementidy.innerHTML = `<p>0.00 &nbsp; FCFA</p>`
                            console.log(sum)
                        }


                    })
                } else {


                }

            });
        }

        window.onload = function () {

            getAllDataRealtimePromontant();
            setTimeout(() => {
                getAllDataRealtime();
            }, 100)

            setTimeout(() => {
                getAllDataRealtimeblogs();
            }, 150)

        }


    </script>
    <script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-storage.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script src="database.js"></script>
    <script src="admin.js"></script>
</body>

</html>